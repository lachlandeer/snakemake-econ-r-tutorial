<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Reproducible Research Workflows with Snakemake and R</title>
  <meta name="description" content="In progress">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Reproducible Research Workflows with Snakemake and R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="In progress" />
  <meta name="github-repo" content="lachlandeer/snakemake-econ-r-tutorial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Reproducible Research Workflows with Snakemake and R" />
  
  <meta name="twitter:description" content="In progress" />
  

<meta name="author" content="Lachlan Deer">
<meta name="author" content="Julian Langer">


<meta name="date" content="2019-02-06">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="logging-output-and-errors.html">
<link rel="next" href="config-files.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reproducible Research Workflows with Snakemake and `R`</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Motivating &amp; Rationale</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#a-case-for-reproducibility"><i class="fa fa-check"></i><b>1.1</b> A Case for Reproducibility</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#how-far-to-go-in-the-quest-for-reproducibility"><i class="fa fa-check"></i><b>1.1.1</b> How far to go in the quest for reproducibility?</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#what-is-snakemake-why-should-you-use-it"><i class="fa fa-check"></i><b>1.2</b> What is <code>Snakemake</code> &amp; Why Should you use it?</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#why-r"><i class="fa fa-check"></i><b>1.3</b> Why <code>R</code>?</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#working-example-replicating-mankiw-romer-and-weils-1992-qje"><i class="fa fa-check"></i><b>1.4</b> Working Example: Replicating Mankiw, Romer and Weil’s 1992 QJE</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#the-way-forward"><i class="fa fa-check"></i><b>1.5</b> The way forward</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#exercise-your-own-projects-steps"><i class="fa fa-check"></i>Exercise: Your own project’s steps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="part-i.html"><a href="part-i.html"><i class="fa fa-check"></i>PART I</a></li>
<li class="chapter" data-level="2" data-path="project-organization.html"><a href="project-organization.html"><i class="fa fa-check"></i><b>2</b> Project Organization</a><ul>
<li class="chapter" data-level="2.1" data-path="project-organization.html"><a href="project-organization.html#project-structure-i-separating-inputs-and-outputs"><i class="fa fa-check"></i><b>2.1</b> Project Structure I: Separating Inputs and Outputs</a><ul>
<li class="chapter" data-level="2.1.1" data-path="project-organization.html"><a href="project-organization.html#the-root-folder"><i class="fa fa-check"></i><b>2.1.1</b> The Root Folder</a></li>
<li class="chapter" data-level="2.1.2" data-path="project-organization.html"><a href="project-organization.html#the-src-folder"><i class="fa fa-check"></i><b>2.1.2</b> The <code>src</code> folder</a></li>
<li class="chapter" data-level="2.1.3" data-path="project-organization.html"><a href="project-organization.html#the-out-folder"><i class="fa fa-check"></i><b>2.1.3</b> The <code>out</code> folder</a></li>
<li class="chapter" data-level="2.1.4" data-path="project-organization.html"><a href="project-organization.html#the-log-folder"><i class="fa fa-check"></i><b>2.1.4</b> The <code>log</code> folder</a></li>
<li class="chapter" data-level="2.1.5" data-path="project-organization.html"><a href="project-organization.html#exploring-the-full-structure-of-the-mrw-replication-project"><i class="fa fa-check"></i><b>2.1.5</b> Exploring the Full Structure of the MRW Replication Project</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="project-organization.html"><a href="project-organization.html#project-structure-ii-separating-logical-chunks-of-the-project"><i class="fa fa-check"></i><b>2.2</b> Project Structure II: Separating Logical Chunks of the Project</a><ul>
<li class="chapter" data-level="2.2.1" data-path="project-organization.html"><a href="project-organization.html#exploring-the-structure-of-the-mrw-replication-subdirectories"><i class="fa fa-check"></i><b>2.2.1</b> Exploring the Structure of the MRW Replication Subdirectories</a></li>
<li class="chapter" data-level="" data-path="project-organization.html"><a href="project-organization.html#exercise-exploring-the-remaining-subdirectories"><i class="fa fa-check"></i>Exercise: Exploring the Remaining Subdirectories</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="project-organization.html"><a href="project-organization.html#project-structure-iii-separating-input-parameters-from-code"><i class="fa fa-check"></i><b>2.3</b> Project Structure III: Separating Input Parameters from Code</a><ul>
<li class="chapter" data-level="2.3.1" data-path="project-organization.html"><a href="project-organization.html#exploring-parameter-separation-in-the-mrw-replication-project"><i class="fa fa-check"></i><b>2.3.1</b> Exploring Parameter Separation in the MRW Replication Project</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="initial-steps-with-snakemake.html"><a href="initial-steps-with-snakemake.html"><i class="fa fa-check"></i><b>3</b> Initial Steps with Snakemake</a><ul>
<li class="chapter" data-level="3.1" data-path="initial-steps-with-snakemake.html"><a href="initial-steps-with-snakemake.html#starting-a-research-project"><i class="fa fa-check"></i><b>3.1</b> Starting a Research Project</a></li>
<li class="chapter" data-level="3.2" data-path="initial-steps-with-snakemake.html"><a href="initial-steps-with-snakemake.html#the-beginning-of-a-snakefile"><i class="fa fa-check"></i><b>3.2</b> The Beginning of a Snakefile</a></li>
<li class="chapter" data-level="3.3" data-path="initial-steps-with-snakemake.html"><a href="initial-steps-with-snakemake.html#rule-structure"><i class="fa fa-check"></i><b>3.3</b> Rule Structure</a></li>
<li class="chapter" data-level="3.4" data-path="initial-steps-with-snakemake.html"><a href="initial-steps-with-snakemake.html#our-first-rule"><i class="fa fa-check"></i><b>3.4</b> Our First Rule</a><ul>
<li class="chapter" data-level="3.4.1" data-path="initial-steps-with-snakemake.html"><a href="initial-steps-with-snakemake.html#constructing-the-rule"><i class="fa fa-check"></i><b>3.4.1</b> Constructing the Rule</a></li>
<li class="chapter" data-level="3.4.2" data-path="initial-steps-with-snakemake.html"><a href="initial-steps-with-snakemake.html#analysing-output"><i class="fa fa-check"></i><b>3.4.2</b> Analysing Output</a></li>
<li class="chapter" data-level="" data-path="initial-steps-with-snakemake.html"><a href="initial-steps-with-snakemake.html#exercise-deleting-output"><i class="fa fa-check"></i>Exercise: Deleting Output</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="initial-steps-with-snakemake.html"><a href="initial-steps-with-snakemake.html#creating-a-second-rule"><i class="fa fa-check"></i><b>3.5</b> Creating a Second Rule</a><ul>
<li class="chapter" data-level="" data-path="initial-steps-with-snakemake.html"><a href="initial-steps-with-snakemake.html#exercise-creating-rules"><i class="fa fa-check"></i>Exercise: Creating Rules</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="initial-steps-with-snakemake.html"><a href="initial-steps-with-snakemake.html#clean-rules"><i class="fa fa-check"></i><b>3.6</b> Clean Rules</a><ul>
<li class="chapter" data-level="" data-path="initial-steps-with-snakemake.html"><a href="initial-steps-with-snakemake.html#exercise-creating-cleaning-rules"><i class="fa fa-check"></i>Exercise: Creating Cleaning Rules</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="pattern-rules.html"><a href="pattern-rules.html"><i class="fa fa-check"></i><b>4</b> Pattern Rules</a><ul>
<li class="chapter" data-level="4.1" data-path="pattern-rules.html"><a href="pattern-rules.html#where-we-are-now"><i class="fa fa-check"></i><b>4.1</b> Where we are now?</a></li>
<li class="chapter" data-level="4.2" data-path="pattern-rules.html"><a href="pattern-rules.html#wildcards"><i class="fa fa-check"></i><b>4.2</b> Wildcards</a></li>
<li class="chapter" data-level="4.3" data-path="pattern-rules.html"><a href="pattern-rules.html#the-expand-function"><i class="fa fa-check"></i><b>4.3</b> The <code>expand()</code> function</a><ul>
<li class="chapter" data-level="" data-path="pattern-rules.html"><a href="pattern-rules.html#exercise-exploring-the-expand-function-i"><i class="fa fa-check"></i>Exercise: Exploring the expand() function I</a></li>
<li class="chapter" data-level="" data-path="pattern-rules.html"><a href="pattern-rules.html#exercise-exploring-the-expand-function-ii"><i class="fa fa-check"></i>Exercise: Exploring the expand function II</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="pattern-rules.html"><a href="pattern-rules.html#expanding-multiple-wildcards"><i class="fa fa-check"></i><b>4.4</b> Expanding Multiple Wildcards</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="automatic-wildcard-specifications.html"><a href="automatic-wildcard-specifications.html"><i class="fa fa-check"></i><b>5</b> Automatic Wildcard Specifications</a><ul>
<li class="chapter" data-level="5.1" data-path="automatic-wildcard-specifications.html"><a href="automatic-wildcard-specifications.html#the-glob_wildcards-function"><i class="fa fa-check"></i><b>5.1</b> The <code>glob_wildcards</code> Function</a><ul>
<li class="chapter" data-level="" data-path="automatic-wildcard-specifications.html"><a href="automatic-wildcard-specifications.html#exercise-exploring-glob_wildcards"><i class="fa fa-check"></i>Exercise: Exploring glob_wildcards()</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="automatic-wildcard-specifications.html"><a href="automatic-wildcard-specifications.html#further-restricting-the-glob_wildcards-output"><i class="fa fa-check"></i><b>5.2</b> Further Restricting the <code>glob_wildcards</code> output</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="building-all-outputs-at-once.html"><a href="building-all-outputs-at-once.html"><i class="fa fa-check"></i><b>6</b> Building all outputs at once</a><ul>
<li class="chapter" data-level="6.1" data-path="building-all-outputs-at-once.html"><a href="building-all-outputs-at-once.html#creating-an-all-rule"><i class="fa fa-check"></i><b>6.1</b> Creating an <code>all</code> rule</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="adding-parameters.html"><a href="adding-parameters.html"><i class="fa fa-check"></i><b>7</b> Adding Parameters</a><ul>
<li class="chapter" data-level="7.1" data-path="adding-parameters.html"><a href="adding-parameters.html#motivating-example-constructing-a-regression-table-from-ols-results"><i class="fa fa-check"></i><b>7.1</b> Motivating Example: Constructing a Regression Table from OLS Results</a></li>
<li class="chapter" data-level="7.2" data-path="adding-parameters.html"><a href="adding-parameters.html#creating-a-rule-with-params"><i class="fa fa-check"></i><b>7.2</b> Creating a Rule with <code>params</code></a><ul>
<li class="chapter" data-level="" data-path="adding-parameters.html"><a href="adding-parameters.html#exercise-building-table-2"><i class="fa fa-check"></i>Exercise: Building Table 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="part-ii.html"><a href="part-ii.html"><i class="fa fa-check"></i>PART II</a></li>
<li class="chapter" data-level="8" data-path="logging-output-and-errors.html"><a href="logging-output-and-errors.html"><i class="fa fa-check"></i><b>8</b> Logging Output and Errors</a><ul>
<li class="chapter" data-level="8.1" data-path="logging-output-and-errors.html"><a href="logging-output-and-errors.html#logging-output"><i class="fa fa-check"></i><b>8.1</b> Logging Output</a></li>
<li class="chapter" data-level="8.2" data-path="logging-output-and-errors.html"><a href="logging-output-and-errors.html#logging-output-and-errors-in-one-file"><i class="fa fa-check"></i><b>8.2</b> Logging Output and Errors in One File</a><ul>
<li class="chapter" data-level="" data-path="logging-output-and-errors.html"><a href="logging-output-and-errors.html#exercise-logging-all-r-scripts"><i class="fa fa-check"></i>Exercise: Logging all R Scripts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="self-documenting-help.html"><a href="self-documenting-help.html"><i class="fa fa-check"></i><b>9</b> Self Documenting Help</a><ul>
<li class="chapter" data-level="9.1" data-path="self-documenting-help.html"><a href="self-documenting-help.html#our-commenting-syle"><i class="fa fa-check"></i><b>9.1</b> Our Commenting Syle</a></li>
<li class="chapter" data-level="9.2" data-path="self-documenting-help.html"><a href="self-documenting-help.html#adding-further-comments"><i class="fa fa-check"></i><b>9.2</b> Adding Further Comments</a><ul>
<li class="chapter" data-level="" data-path="self-documenting-help.html"><a href="self-documenting-help.html#exercise-adding-comments"><i class="fa fa-check"></i>Exercise: Adding Comments</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="self-documenting-help.html"><a href="self-documenting-help.html#a-help-rule"><i class="fa fa-check"></i><b>9.3</b> A <code>help</code> Rule</a><ul>
<li><a href="self-documenting-help.html#exercise-saving-help-output-to-file">Exercise: Saving <code>help</code> output to file</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="config-files.html"><a href="config-files.html"><i class="fa fa-check"></i><b>10</b> Config Files</a></li>
<li class="chapter" data-level="11" data-path="subworkflows-divide-and-conquer.html"><a href="subworkflows-divide-and-conquer.html"><i class="fa fa-check"></i><b>11</b> Subworkflows: Divide and Conquer</a></li>
<li class="chapter" data-level="" data-path="part-iii.html"><a href="part-iii.html"><i class="fa fa-check"></i>PART III</a></li>
<li class="chapter" data-level="12" data-path="reproducible-articles-with-rmd.html"><a href="reproducible-articles-with-rmd.html"><i class="fa fa-check"></i><b>12</b> Reproducible Articles with Rmd</a></li>
<li class="chapter" data-level="13" data-path="reproducible-slides-with-rmd.html"><a href="reproducible-slides-with-rmd.html"><i class="fa fa-check"></i><b>13</b> Reproducible Slides with Rmd</a></li>
<li class="chapter" data-level="14" data-path="package-dependencies-with-packrat.html"><a href="package-dependencies-with-packrat.html"><i class="fa fa-check"></i><b>14</b> Package Dependencies with Packrat</a></li>
<li class="chapter" data-level="15" data-path="containers.html"><a href="containers.html"><i class="fa fa-check"></i><b>15</b> Containers</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible Research Workflows with Snakemake and <code>R</code></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="self-documenting-help" class="section level1">
<h1><span class="header-section-number">Chapter 9</span> Self Documenting Help</h1>
<p>As we build up our Snakemake workflow the Snakefile becomes increasingly complex. It is easy to imagine that a future version of you, or a co-author, might have difficulty understanding what each rule is doing. This chapter introduces an approach to add some comments to the Snakefile to make it easier to navigate. We also add a new <code>help</code> rule so that we can get a summary of the comments printed to screen.</p>
<div id="our-commenting-syle" class="section level2">
<h2><span class="header-section-number">9.1</span> Our Commenting Syle</h2>
<p>If we look at the Snakefile in it’s current state, we see that there are a bare minimum amount of comments already integrated. Because Snakemake is a Python library all comments must begin with one <code>#</code>. We then added some additional formatting of comments to create two types.<a href="#fn9" class="footnoteRef" id="fnref9"><sup>9</sup></a> Our first type of comment is a ‘double hash’ - <code>##</code>. We use this to represent information that someone who reads our code might find helpful to build understanding of the file. For example, the head of the Snakefile contains information on the name of the workflow and the authors:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">## Snakemake - MRW Replication</span>
<span class="co">##</span>
<span class="co">## @yourname</span>
<span class="co">##</span></code></pre></div>
<p>Second, we have broken up the Snakefile somewhat into sections such as Dictionaries, Build Rules and Clean Rules using the <code># --- Something --- #</code> notation.</p>
</div>
<div id="adding-further-comments" class="section level2">
<h2><span class="header-section-number">9.2</span> Adding Further Comments</h2>
<p>The information we have added in comments so far is not really enough to help us remember much. What we want is a simple one or two line summary of what each of our rules do so that we can look back at them in the future. We are going to make comments above each rule using the <code>##</code> notation. The structure will follow a common pattern: <code>rule_name : some description</code> For example, for the <code>textbook_solow</code> rule:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">## textbook_solow: construct a table of regression estimates for textbook solow model</span>
<span class="kw">rule</span> textbook_solow:
    <span class="kw">input</span>:
        <span class="kw">script</span> = <span class="st">&quot;src/tables/tab01_textbook_solow.R&quot;</span>,
        <span class="kw">models</span> = expand(<span class="st">&quot;out/analysis/{iModel}_ols_{iSubset}.rds&quot;</span>,
                            <span class="kw">iModel</span> = MODELS,
                            <span class="kw">iSubset</span> = DATA_SUBSET)),
    <span class="kw">params</span>:
        <span class="kw">filepath</span>   = <span class="st">&quot;out/analysis/&quot;</span>,
        <span class="kw">model_expr</span> = <span class="st">&quot;model_solow*.rds&quot;</span>
    <span class="kw">output</span>:
        <span class="kw">table</span> = <span class="st">&quot;out/tables/tab01_textbook_solow.tex&quot;</span>
    <span class="kw">shell</span>:
        <span class="st">&quot;Rscript {input.script} \</span>
<span class="st">            --filepath {params.filepath} \</span>
<span class="st">            --models {params.model_expr} \</span>
<span class="st">            --out {output.table}&quot;</span></code></pre></div>
<div id="exercise-adding-comments" class="section level3 unnumbered exercise">
<h3>Exercise: Adding Comments</h3>
<p>Add some comments using our suggested style to each of the Snakemake rules we have constructed so far.</p>
</div>
</div>
<div id="a-help-rule" class="section level2">
<h2><span class="header-section-number">9.3</span> A <code>help</code> Rule</h2>
<p>The Snakefile is now much easier to understand when reading through it. Future you will be grateful for the effort. We can go one step further: construct a rule that prints the output of these comments to the screen. Let’s call this rule <code>help</code>, so that if we run <code>snakemake help</code> all our useful comments will be printed to screen. We usually put this help rule at the bottom of our Snakefile, so that we don’t keep bumping into it as we work. The rule has the following structure:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># --- Help Rules --- #</span>
<span class="co">## help               : prints help comments for Snakefile</span>
<span class="kw">rule</span> help:
    <span class="kw">input</span>: <span class="st">&quot;Snakefile&quot;</span>
    <span class="kw">shell</span>:
        <span class="st">&quot;sed -n &#39;s/^##//p&#39; {input}&quot;</span></code></pre></div>
<p>The rule depends on the <code>Snakefile</code> itself - because if the file changes, the might too. The shell comand that we use is a little confusing when we look at it the first time. Intuitively heres what it is doing:</p>
<ul>
<li>The comments we want to print are those that have the double hash notation, <code>##</code>.</li>
<li><code>sed</code> is a progam that can perform text manipulations to some input
<ul>
<li>We want it to find all lines starting with <code>##</code> in our input file …</li>
<li>… and print out the remainder of those lines</li>
</ul></li>
</ul>
<p>Let’s see it in action:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">snakemake</span> help</code></pre></div>
<pre class="out"><code>Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 1
Rules claiming more threads will be scaled down.
Job counts:
    count   jobs
    1   help
    1

[Wed Feb  6 19:13:51 2019]
rule help:
    input: Snakefile
    jobid: 0

 Snakemake - MRW Replication

 @yourname

 all                : builds all final outputs
 augment_solow      : construct a table of estimates for augmented solow model
 textbook_solow     : construct a table of regression estimates for textbook solow model
 make_figs          : builds all figures
 figures            : recipe for constructing a figure (cannot be called)
 estimate_models    : estimates all regressions
 ols_models         : recipe for estimating a single regression (cannot be called)
 gen_regression_vars: creates variables needed to estimate a regression
 rename_vars        : creates meaningful variable names
 clean              : removes all content from out/ directory
 help               : prints help comments for Snakefile
[Wed Feb  6 19:13:51 2019]
Finished job 0.
1 of 1 steps (100%) done
</code></pre>
<div id="exercise-saving-help-output-to-file" class="section level3 unnumbered exercise">
<h3>Exercise: Saving <code>help</code> output to file</h3>
<p>Modify the <code>help</code> rule so that the printed content is saved in a file called <code>HELP.txt</code></p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="9">
<li id="fn9"><p>Do notice that the exact formatting of all this help is totally arbitrary. Noone tells you that two <code>#</code>’s or a mix of <code>#</code>’s and <code>-</code>’s are meaningful, correct or standard ways of putting comments in a file. Our choice reflects path dependence in the way we started writing Snakefiles, and we have found them useful and persisted with our initial choice. Feel free to create your own. The only important thing is the line starts with one <code>#</code> so that Snakemake doesnt try and execute that line as code.<a href="self-documenting-help.html#fnref9">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="logging-output-and-errors.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="config-files.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/09-documenting_help.Rmd",
"text": "Edit"
},
"download": ["book.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
